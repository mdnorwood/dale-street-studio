{"ast":null,"code":"module.exports = to_utf8;\nvar out = [],\n    col = [],\n    fcc = String.fromCharCode,\n    mask = [0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01],\n    unmask = [0x00, 0x01, 0x02 | 0x01, 0x04 | 0x02 | 0x01, 0x08 | 0x04 | 0x02 | 0x01, 0x10 | 0x08 | 0x04 | 0x02 | 0x01, 0x20 | 0x10 | 0x08 | 0x04 | 0x02 | 0x01, 0x40 | 0x20 | 0x10 | 0x08 | 0x04 | 0x02 | 0x01];\n\nfunction to_utf8(bytes, start, end) {\n  start = start === undefined ? 0 : start;\n  end = end === undefined ? bytes.length : end;\n  var idx = 0,\n      hi = 0x80,\n      collecting = 0,\n      pos,\n      by;\n  col.length = out.length = 0;\n\n  while (idx < bytes.length) {\n    by = bytes[idx];\n\n    if (!collecting && by & hi) {\n      pos = find_pad_position(by);\n      collecting += pos;\n\n      if (pos < 8) {\n        col[col.length] = by & unmask[6 - pos];\n      }\n    } else if (collecting) {\n      col[col.length] = by & unmask[6];\n      --collecting;\n\n      if (!collecting && col.length) {\n        out[out.length] = fcc(reduced(col, pos));\n        col.length = 0;\n      }\n    } else {\n      out[out.length] = fcc(by);\n    }\n\n    ++idx;\n  }\n\n  if (col.length && !collecting) {\n    out[out.length] = fcc(reduced(col, pos));\n    col.length = 0;\n  }\n\n  return out.join('');\n}\n\nfunction find_pad_position(byt) {\n  for (var i = 0; i < 7; ++i) {\n    if (!(byt & mask[i])) {\n      break;\n    }\n  }\n\n  return i;\n}\n\nfunction reduced(list) {\n  var out = 0;\n\n  for (var i = 0, len = list.length; i < len; ++i) {\n    out |= list[i] << (len - i - 1) * 6;\n  }\n\n  return out;\n}","map":{"version":3,"sources":["/Users/marcusnorwood/Sites/music-site/dale-street-studio-music/client/node_modules/to-utf8/index.js"],"names":["module","exports","to_utf8","out","col","fcc","String","fromCharCode","mask","unmask","bytes","start","end","undefined","length","idx","hi","collecting","pos","by","find_pad_position","reduced","join","byt","i","list","len"],"mappings":"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","sourcesContent":["module.exports = to_utf8\n\nvar out = []\n  , col = []\n  , fcc = String.fromCharCode\n  , mask = [0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01]\n  , unmask = [\n      0x00\n    , 0x01\n    , 0x02 | 0x01\n    , 0x04 | 0x02 | 0x01\n    , 0x08 | 0x04 | 0x02 | 0x01\n    , 0x10 | 0x08 | 0x04 | 0x02 | 0x01\n    , 0x20 | 0x10 | 0x08 | 0x04 | 0x02 | 0x01\n    , 0x40 | 0x20 | 0x10 | 0x08 | 0x04 | 0x02 | 0x01\n  ]\n\nfunction to_utf8(bytes, start, end) {\n  start = start === undefined ? 0 : start\n  end = end === undefined ? bytes.length : end\n\n  var idx = 0\n    , hi = 0x80\n    , collecting = 0\n    , pos\n    , by\n\n  col.length =\n  out.length = 0\n\n  while(idx < bytes.length) {\n    by = bytes[idx]\n    if(!collecting && by & hi) {\n      pos = find_pad_position(by)\n      collecting += pos\n      if(pos < 8) {\n        col[col.length] = by & unmask[6 - pos]\n      }\n    } else if(collecting) {\n      col[col.length] = by & unmask[6]\n      --collecting\n      if(!collecting && col.length) {\n        out[out.length] = fcc(reduced(col, pos))\n        col.length = 0\n      }\n    } else { \n      out[out.length] = fcc(by)\n    }\n    ++idx\n  }\n  if(col.length && !collecting) {\n    out[out.length] = fcc(reduced(col, pos))\n    col.length = 0\n  }\n  return out.join('')\n}\n\nfunction find_pad_position(byt) {\n  for(var i = 0; i < 7; ++i) {\n    if(!(byt & mask[i])) {\n      break\n    }\n  }\n  return i\n}\n\nfunction reduced(list) {\n  var out = 0\n  for(var i = 0, len = list.length; i < len; ++i) {\n    out |= list[i] << ((len - i - 1) * 6)\n  }\n  return out\n}\n"]},"metadata":{},"sourceType":"script"}