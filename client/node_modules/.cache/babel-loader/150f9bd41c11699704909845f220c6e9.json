{"ast":null,"code":"import _slicedToArray from\"/Users/marcusnorwood/Sites/music-site/dale-street-studio-music/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{storage}from'../../firebase/firebase.utils';import{ImageContainer}from'./file-upload.style';import bannerImageSrcWebP from'../../images/WebPFiles/Banner-Background.webp';import bannerImageSrcJPX from'../../images/JPXFiles/Banner-Background.jpx';import bannerImageSrcJPG from'../../images/Banner-Background.jpg';import NextGenImgsWithFallback from'../ImgWithFallback/ImgWithFallback.component';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUploader=function FileUploader(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};var handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){console.log(error);},function(){storage.ref(\"images\").child(image.name).getDownloadURL().then(function(url){setUrl(url);});});};console.log('image: ',image);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Image File Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Image Upload\"}),/*#__PURE__*/_jsx(\"br\",{}),url,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ImageContainer,{src:url||'https://via.placholder.com/300x400',alt:\"firebase-image\"}),/*#__PURE__*/_jsx(NextGenImgsWithFallback,{srcWebP:bannerImageSrcWebP,srcJPX:bannerImageSrcJPX,fallbackSrc:bannerImageSrcJPG,alt:\"banner Image\"})]});};export default FileUploader;","map":{"version":3,"sources":["/Users/marcusnorwood/Sites/music-site/dale-street-studio-music/client/src/components/file-upload/file-upload.component.jsx"],"names":["React","useState","storage","ImageContainer","bannerImageSrcWebP","bannerImageSrcJPX","bannerImageSrcJPG","NextGenImgsWithFallback","FileUploader","image","setImage","url","setUrl","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then"],"mappings":"4LAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,OAAT,KAAwB,+BAAxB,CAEA,OAASC,cAAT,KAA+B,qBAA/B,CAEA,MAAOC,CAAAA,kBAAP,KAA+B,+CAA/B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,6CAA9B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,oCAA9B,CAEA,MAAOC,CAAAA,uBAAP,KAAoC,8CAApC,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,eACCP,QAAQ,CAAC,IAAD,CADT,wCAClBQ,KADkB,eACXC,QADW,8BAEHT,QAAQ,CAAC,EAAD,CAFL,yCAElBU,GAFkB,eAEbC,MAFa,8BAGOX,QAAQ,CAAC,CAAD,CAHf,yCAGlBY,QAHkB,eAGRC,WAHQ,eAKzB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACxB,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,CAAuB,CACrBR,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR,CACD,CACF,CAJD,CAMA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,UAAU,CAAGlB,OAAO,CAACmB,GAAR,kBAAsBZ,KAAK,CAACa,IAA5B,GAAoCC,GAApC,CAAwCd,KAAxC,CAAnB,CACAW,UAAU,CAACI,EAAX,CACE,eADF,CAEE,SAAAC,QAAQ,CAAI,CACV,GAAMZ,CAAAA,QAAQ,CAAGa,IAAI,CAACC,KAAL,CACdF,QAAQ,CAACG,gBAAT,CAA4BH,QAAQ,CAACI,UAAtC,CAAoD,GADrC,CAAjB,CAGAf,WAAW,CAACD,QAAD,CAAX,CACD,CAPH,CAQE,SAAAiB,KAAK,CAAI,CACPC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAVH,CAWE,UAAM,CACJ5B,OAAO,CACJmB,GADH,CACO,QADP,EAEGY,KAFH,CAESxB,KAAK,CAACa,IAFf,EAGGY,cAHH,GAIGC,IAJH,CAIQ,SAAAxB,GAAG,CAAI,CACXC,MAAM,CAACD,GAAD,CAAN,CACD,CANH,EAOD,CAnBH,EAqBD,CAvBD,CAyBAoB,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBvB,KAAvB,EAEA,mBACE,oCACE,iBAAU,KAAK,CAAEI,QAAjB,CAA2B,GAAG,CAAC,KAA/B,EADF,cAEE,aAFF,cAEO,aAFP,cAGE,wCAHF,cAIE,cAAO,IAAI,CAAC,MAAZ,CAAmB,MAAM,CAAC,SAA1B,CAAoC,QAAQ,CAAEE,YAA9C,EAJF,cAKE,eAAQ,OAAO,CAAEI,YAAjB,0BALF,cAME,aANF,CAOGR,GAPH,cAQE,aARF,cASE,KAAC,cAAD,EAAgB,GAAG,CAAEA,GAAG,EAAI,oCAA5B,CAAkE,GAAG,CAAC,gBAAtE,EATF,cAYE,KAAC,uBAAD,EACA,OAAO,CAAEP,kBADT,CAEA,MAAM,CAAEC,iBAFR,CAGA,WAAW,CAAEC,iBAHb,CAIA,GAAG,CAAC,cAJJ,EAZF,GADF,CAqBD,CA3DD,CA6DA,cAAeE,CAAAA,YAAf","sourcesContent":["import React, { useState } from 'react';\nimport { storage } from '../../firebase/firebase.utils';\n\nimport { ImageContainer } from './file-upload.style';\n\nimport bannerImageSrcWebP from '../../images/WebPFiles/Banner-Background.webp';\nimport bannerImageSrcJPX from '../../images/JPXFiles/Banner-Background.jpx';\nimport bannerImageSrcJPG from '../../images/Banner-Background.jpg';\n\nimport NextGenImgsWithFallback from '../ImgWithFallback/ImgWithFallback.component';\n\nconst FileUploader = () => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const[ progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      snapshot => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      error => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then(url => {\n            setUrl(url)\n          });\n      }\n    );\n  };\n\n  console.log('image: ', image);\n\n  return (\n    <div>\n      <progress value={progress} max='100' />\n      <br/><br/>\n      <p>Image File Upload</p>\n      <input type='file' accept=\"image/*\" onChange={handleChange} />\n      <button onClick={handleUpload}>Image Upload</button>\n      <br/>\n      {url}\n      <br/>\n      <ImageContainer src={url || 'https://via.placholder.com/300x400'} alt=\"firebase-image\" />\n\n\n      <NextGenImgsWithFallback\n      srcWebP={bannerImageSrcWebP}\n      srcJPX={bannerImageSrcJPX}\n      fallbackSrc={bannerImageSrcJPG}\n      alt=\"banner Image\"\n    />\n    </div>\n  );\n};\n\nexport default FileUploader;"]},"metadata":{},"sourceType":"module"}